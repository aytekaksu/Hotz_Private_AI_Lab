{
    # Used for ACME account registration with Let's Encrypt/ZeroSSL
    email {$ACME_EMAIL}
}

# Main application
{$INTERNAL_DOMAIN} {
    reverse_proxy web:3000

    # Automatic public certificates (ACME). If you set CLOUDFLARE_API_TOKEN
    # and want DNS challenge instead of HTTP/ALPN, run scripts/provision-tls.sh.

    # Security headers
    header {
        Strict-Transport-Security "max-age=31536000; includeSubDomains; preload"
        X-Content-Type-Options "nosniff"
        X-Frame-Options "DENY"
        X-XSS-Protection "1; mode=block"
    }
}

